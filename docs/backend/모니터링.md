## LOKI 모니터링 도입 이유

- 현재 엘라스틱 빈스톡은 불편한 점이 많다.
    - 실시간으로 모니터링을 확인하는 것이 느리다.
    - 로그를 보기 위해서 다운로드를 받아야 한다.
    - 현재 확인할 수 있는 로그는 error 이다. 
        - fetch + pagination 은 메모리에서 문제가 발생한다.
        - warning 에러가 발생하기 때문에 파악할 수 없다.
        - 각 에러 레벨의 역할을 명확하게 할 필요가 있다.

- 로그들을 모니터링하면서 추이와 이상점을 살펴볼 수 있다.
- 캠퍼스 뿐만 아니라 가정에서도 확인이 가능하다.

## promtail

- 스프링에서 뱉어낸 로그를 Loki 로 보내준다.(POST) (/push)

## Loki

- promtail 에서 보내주는 로그를 받아야하는데 Loki 의 기본 포트는 3100이다.
- 그런데 인바운드 규칙상 3100이 열려있지 않아서 8080 으로 서버를 띄웠다.
- /ready 로 준비가 됐는지 확인이 가능하다.

## Grafana

- 시각화 툴
- 데이터 소스를 활용하여 시각화
## 현재 상황

- 서버가 떠있지 않음
- 이유
    - dev, prod 서버를 분리하여 로그를 수집해야 하는데, 이 부분에서 문제가 발생
        1. 서버별로 구분하기 위해 각 서버의 key 와 password 가 필요한데 우아한 형제들 보안상 제공 불가능
        2. 로그백 파일에서 서버별로 구분하고 분기 처리하는 방법은 반복적인 일에 시간을 많이 소요하게 되어 하지 않음
